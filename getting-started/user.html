<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Interact with contract as a User - Tokei Book</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Introduction</a></li><li class="chapter-item expanded "><a href="../getting-started/index.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../getting-started/prerequisites.html"><strong aria-hidden="true">1.1.</strong> Prerequisites</a></li><li class="chapter-item expanded "><a href="../getting-started/build.html"><strong aria-hidden="true">1.2.</strong> Build the contracts</a></li><li class="chapter-item expanded "><a href="../getting-started/test.html"><strong aria-hidden="true">1.3.</strong> Test the contracts</a></li><li class="chapter-item expanded "><a href="../getting-started/user.html" class="active"><strong aria-hidden="true">1.4.</strong> Interact with contract as a User</a></li><li class="chapter-item expanded "><a href="../getting-started/admin.html"><strong aria-hidden="true">1.5.</strong> Interact with contract as an Admin</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Tokei Book</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/starknet-io/tokei" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/starknet-io/tokei/book/src/getting-started/user.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="user-interaction-cli-tool"><a class="header" href="#user-interaction-cli-tool">User Interaction CLI Tool</a></h1>
<h2 id="-overview"><a class="header" href="#-overview">🔍 Overview</a></h2>
<p>This command-line interface (CLI) tool is designed for interacting with a streaming contract. It provides an easy-to-use interface to execute various functions related to asset streaming, such as creating streams, withdrawing funds, and querying stream details.</p>
<p>The Tokei Lockup Linear Contract is part of the Tokei protocol, designed to manage financial streams over time. This contract is particularly relevant for users interested in creating, managing, and interacting with asset streams. Key functionalities include:
Detailed Functionalities:</p>
<hr />
<h3 id="-stream-creation"><a class="header" href="#-stream-creation">🏄 Stream Creation:</a></h3>
<p>Users can initiate asset streams with precise timing. The contract allows specification of start, cliff, and end times, controlling the asset flow.
<br>
Durations Structure: This struct includes two key time periods - the cliff duration and the total duration. The cliff duration is a waiting period before the asset distribution starts, while the total duration is the entire span of the asset stream.
<br>
Range Structure: Defines the specific timing of the stream with start, cliff, and end timestamps. This granularity offers users flexibility in how they schedule their asset distribution.</p>
<hr />
<h2 id="asset-management"><a class="header" href="#asset-management">💰Asset Management:</a></h2>
<h3 id="cancelable-streams"><a class="header" href="#cancelable-streams">Cancelable Streams:</a></h3>
<p>Users have the option to cancel streams, providing flexibility and control over their asset distribution.</p>
<hr />
<h3 id="-transferable-rights"><a class="header" href="#-transferable-rights">🚙 Transferable Rights:</a></h3>
<p>Streams can be made transferable, allowing users to assign their streaming rights to others, adding an element of liquidity to their assets.</p>
<hr />
<h3 id="-withdrawals"><a class="header" href="#-withdrawals">🏧 Withdrawals:</a></h3>
<p>Assets can be withdrawn as per the defined schedule, offering users timely access to their funds.</p>
<hr />
<h3 id="-fee-and-nft-integration"><a class="header" href="#-fee-and-nft-integration">🎨 Fee and NFT Integration:</a></h3>
<p>The contract entails fees like protocol fees and broker fees, calculated as percentages of the total stream amount.
Each stream is uniquely represented as an NFT, providing a tangible asset that can be held, transferred, or traded.</p>
<hr />
<h3 id="structures-in-detail"><a class="header" href="#structures-in-detail">Structures in Detail:</a></h3>
<h4 id="duration"><a class="header" href="#duration">Duration:</a></h4>
<p>This structure is key for defining the time frame of an asset stream. It includes two components:</p>
<h4 id="cliff"><a class="header" href="#cliff">Cliff:</a></h4>
<p>The initial period during which no assets are distributed.</p>
<h4 id="total"><a class="header" href="#total">Total:</a></h4>
<p>The entire length of the asset stream, from start to finish.</p>
<h4 id="range"><a class="header" href="#range">Range:</a></h4>
<p>This structure provides a more detailed breakdown of the stream's timeline, with specific timestamps marking the start, cliff, and end of the asset distribution.</p>
<hr />
<h2 id="-prerequisites"><a class="header" href="#-prerequisites">📝 Prerequisites</a></h2>
<p>Before running this tool, ensure you have the following prerequisites installed:</p>
<ul>
<li>Node.js</li>
<li>TypeScript</li>
<li>ts-node</li>
</ul>
<h2 id="-installation"><a class="header" href="#-installation">⚙️ Installation</a></h2>
<ol>
<li>Clone the repository to your local machine.</li>
<li>Navigate to the project directory.</li>
<li>Install the dependencies using npm:</li>
</ol>
<pre><code class="language-bash">npm install or yarn
</code></pre>
<h2 id="-usage"><a class="header" href="#-usage">🔬 Usage</a></h2>
<p>To start the CLI tool, run the following command in the terminal:</p>
<pre><code class="language-bash">npx ts-node src/scripts/user_interaction.ts
</code></pre>
<h3 id="-interactive-cli"><a class="header" href="#-interactive-cli">🤺 Interactive CLI</a></h3>
<p>Once the script is running, you will be presented with an interactive CLI. The CLI offers a range of 'view' and 'external' functions that you can call and invoke. </p>
<h3 id="executing-functions"><a class="header" href="#executing-functions">Executing Functions</a></h3>
<p>Follow these steps to execute a function:</p>
<ol>
<li>Choose a function from the list provided by the CLI.</li>
<li>Enter the function name when prompted.</li>
<li>You will then be prompted to provide the necessary parameters for the chosen function.</li>
<li>After entering the parameters, the function will be invoked, and the output (if any) will be displayed in the CLI.</li>
</ol>
<h3 id="available-functions"><a class="header" href="#available-functions">Available Functions</a></h3>
<p>The tool provides various functions, categorized as 'view' and 'external' functions. Here's a brief overview:</p>
<h4 id="view-functions"><a class="header" href="#view-functions">View Functions</a></h4>
<p>These functions are used to view details about streams. Examples include:</p>
<ul>
<li><code>get_asset</code></li>
<li><code>get_protocol_fee</code></li>
<li><code>get_protocol_revenues</code></li>
<li><code>get_cliff_time</code></li>
<li>...and more</li>
</ul>
<h4 id="external-functions"><a class="header" href="#external-functions">External Functions</a></h4>
<p>These functions allow you to perform actions like creating or canceling streams. Examples include:</p>
<ul>
<li><code>create_with_duration</code></li>
<li><code>create_with_range</code></li>
<li><code>cancel_stream</code></li>
<li><code>withdraw_max</code></li>
<li>...and more</li>
</ul>
<h3 id="-example-workflow-of-invoking-a-write-function"><a class="header" href="#-example-workflow-of-invoking-a-write-function">🏄 Example Workflow of invoking a write function</a></h3>
<ol>
<li>Choose a function, e.g., <code>create_with_duration</code>.</li>
<li>Provide the required parameters like sender, recipient, amount, asset, etc.</li>
<li>The function will be executed, and the transaction hash or relevant information will be displayed.
An example of a transaction :
<img width="1047" alt="Screenshot 2024-01-25 at 10 13 42 PM" src="https://github.com/Akashneelesh/tokei/assets/66639153/267d1aae-e79e-4008-a20a-6292289ca9fe"></li>
</ol>
<h3 id="example-workflow-of-invoking-a-read-function"><a class="header" href="#example-workflow-of-invoking-a-read-function">Example Workflow of invoking a read function</a></h3>
<ol>
<li>Choose a function, e.g., <code>get_range</code>.</li>
<li>Provide the stream ID</li>
<li>The function will return back with the relevant information.
An example of a transaction :
<img width="879" alt="Screenshot 2024-01-25 at 10 15 47 PM" src="https://github.com/Akashneelesh/tokei/assets/66639153/1190b689-3edc-4a40-9d94-eaa5f9f43975"></li>
</ol>
<h3 id="example-inputs"><a class="header" href="#example-inputs">Example Inputs</a></h3>
<ul>
<li>The example inputs are available in src/scripts/user_example.txt.</li>
<li>You could refer to it for executing a test stream.</li>
</ul>
<h2 id="error-handling"><a class="header" href="#error-handling">Error Handling</a></h2>
<p>If an error occurs during the execution of a function, the tool will display an error message. Please ensure that all parameters are entered correctly and in the required format.</p>
<h2 id="closing-the-cli"><a class="header" href="#closing-the-cli">Closing the CLI</a></h2>
<p>To exit the CLI, type <code>quit</code> at any prompt.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../getting-started/test.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../getting-started/admin.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../getting-started/test.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../getting-started/admin.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
